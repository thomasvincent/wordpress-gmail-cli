name: "WordPress Social Authentication CodeQL Configuration"

# Use custom queries along with default queries
disable-default-queries: false

# Define query suites to run
queries:
  # Run standard security and quality queries (default)
  - uses: security-and-quality
  # Add standard security-extended queries for more comprehensive analysis
  - uses: security-extended
  # Add custom queries for PHP-specific security issues
  - name: PHP Security Queries
    uses: ./.github/codeql/security-queries/php

# Define paths to exclude from analysis
paths-ignore:
  # Dependency directories
  - '**/vendor/**'
  - '**/node_modules/**'
  # Test files - we don't exclude tests completely to catch bugs in test utilities
  - '**/tests/fixtures/**'
  # Documentation
  - '**/*.md'
  - '**/*.txt'
  - '**/docs/**'

# Language-specific configuration
languages:
  # PHP configuration
  - name: php
    # Specify patterns for test files (used by some metrics/queries)
    test-patterns:
      - '**/tests/**/*.php'
      - '**/Test.php'
      - '**/*Test.php'
    # Configure indexing (fine-tune source file discovery)
    index:
      # Explicitly include all .php files
      include:
        - '**/*.php'
      # Explicitly exclude vendor and test dirs
      exclude:
        - '**/vendor/**'
  
# Database configuration to improve performance
database:
  # Optimize database for better performance
  optimize: true
  # Set maximum database size (1GB)
  max-disk-space: 1024 # In MB